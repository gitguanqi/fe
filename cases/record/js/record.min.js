function startRecord(e){videoEnabled=e,mediaUtils.getUserMedia(e,!0,function(e,t){if(e)throw e;recorder=new MediaRecorder(t),mediaStream=t;var r=[];recorder.ondataavailable=function(e){r.push(e.data)},recorder.onstop=function(e){recorderFile=new Blob(r,{type:recorder.mimeType}),r=[],null!=stopRecordCallback&&stopRecordCallback()},recorder.start()})}function stopRecord(e){stopRecordCallback=e,recorder.stop(),mediaUtils.closeStream(mediaStream)}function playRecord(){var e=URL.createObjectURL(recorderFile),t=document.createElement(videoEnabled?"video":"audio");t.autoplay=!0,t.src=e;var r=document.querySelector("#record");videoEnabled&&(t.style.position="relative",t.style.margin="0 auto",t.width=320,t.height=200,t.setAttribute("controls","controls"),r.appendChild(t))}const mediaUtils={getUserMedia:function(e,t,r){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.getUserMedia;var o={video:e,audio:t};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(o).then(function(e){r(!1,e)}).catch(function(e){r(e)}):navigator.getUserMedia?navigator.getUserMedia(o,function(e){r(!1,e)},function(e){r(e)}):r(new Error("Not Support userMedia!"))},closeStream:function(e){if("function"==typeof e.stop)e.stop();else{let t=[e.getAudioTracks(),e.getVideoTracks()];for(let e=0;e<t.length;e++){let r=t[e];if(r&&r.length>0)for(let e=0;e<r.length;e++){let t=r[e];"function"==typeof r.stop&&t.stop()}}}}};let recorder,mediaStream,recorderFile,stopRecordCallback,videoEnabled=!1;console.log("录制数据：",recorderFile);